% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/average_pitchtracks.R
\name{average_pitchtracks}
\alias{average_pitchtracks}
\title{Equally-spaced average pitch contours}
\usage{
average_pitchtracks(
  pitchtier_df,
  section_by,
  pulses_per_section,
  time_by = "timepoint_norm",
  aggregate_by,
  .pitchval = "hz",
  index_column = NULL,
  .sort = FALSE,
  parallelize = FALSE
)
}
\arguments{
\item{pitchtier_df}{Pitchtier dataframe, output of \code{batch_process_pitchtiers}
and preferably with time normalization already applied}

\item{section_by}{Column name containing the section designations of the pitch contour}

\item{pulses_per_section}{An integer vector of how many points to use
for each section of the contour. This needs to have EITHER 1 value, which
is recycled for all sections OR as many values as there are sections. In the
latter case, it is HIGHLY RECOMMENDED that this vector is NAMED and in the
desired order of the sections. If the vector is unnamed, it will use the
names of the section in the order they appear in the data.}

\item{time_by}{Quoted column name containing the timepoints, defaults to
\code{"timepoint_norm"} (highly recommended to use \code{time_normalize} as a
preprocessing step beforehand)}

\item{aggregate_by}{A formula of unquoted column names. The LHS should index
individual recordings, e.g. a \code{file} column. The RHS should index what you
want to aggregate over, e.g. by \code{utterance} and \code{tune}. This would be written
as \code{file ~ utterance + tune}. Unpredictable results may occur if recordings
are not uniquely identifiable by the column specified in the LHS.}

\item{.pitchval}{Quoted column name containing the pitch values to average
over. Defaults to \code{"hz"}}

\item{index_column}{See \code{piecewise_interpolate_pulses}}

\item{.sort}{Logical, whether to sort the dataset first. Default is FALSE,
recommended to actually not use this and presort the data yourself if it
happens to not be sorted already (usually F0 datasets are already sorted).
This is really only included at this point for testing and error handling
purposes.}

\item{parallelize}{Deprecated, set up splits manually as a list of dataframes,
then map to each subset using something like \code{furrr::future_map()}
\code{furrr::future_map_dfr}, passed on to \code{piecewise_interpolate_pulses}}
}
\value{
A dataframe containing the averaged and equally spaced piecewise
pitch contours
}
\description{
This function averages pitch contours, with the possibility of doing the
averaging by section. For example, we could average the prenuclear portion
with 15 equally spaced points and then average the nuclear portion with 30
equally spaced points. This avoids the problem of setting 45 points for the
total utterance but being unsure about whether nuclear points are being
averaged with prenuclear points.
}
\details{
You can also chain this for higher-order aggregation, e.g. to get the average
tune produced by a participant, then the average across all participants:
pitchtier_df |>
average_pitchtracks(aggregate_by = file ~ utterance + tune + participant) |>
average_pitchtracks(aggregate_by = participant ~ utterance + tune)
}
